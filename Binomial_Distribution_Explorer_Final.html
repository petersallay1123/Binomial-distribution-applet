<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binomial Distribution Explorer</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; min-height: 100vh; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); padding: 30px; }
        h1 { color: #667eea; text-align: center; margin-bottom: 30px; font-size: 2em; }
        .input-section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .input-group { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px; }
        .input-field { display: flex; flex-direction: column; }
        label { font-weight: 600; color: #333; margin-bottom: 6px; font-size: 0.71em; }
        input[type="number"] { padding: 9px; border: 2px solid #ddd; border-radius: 8px; font-size: 0.75em; transition: border-color 0.3s; }
        input[type="number"]:focus { outline: none; border-color: #667eea; }
        .slider-container { margin-top: 15px; padding: 15px; background: white; border-radius: 8px; }
        .slider-label { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .slider-label label { font-size: 0.71em; }
        .slider-value { background: #667eea; color: white; padding: 4px 12px; border-radius: 20px; font-weight: bold; font-size: 0.71em; }
        input[type="range"] { width: 100%; height: 6px; border-radius: 5px; background: #ddd; outline: none; -webkit-appearance: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #667eea; cursor: pointer; }
        input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border-radius: 50%; background: #667eea; cursor: pointer; border: none; }
        button { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 9px 22px; border-radius: 8px; font-size: 0.75em; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; margin-top: 8px; }
        button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4); }
        .stats-section { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 30px; }
        .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 10px; text-align: center; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); }
        .stat-label { font-size: 0.68em; opacity: 0.9; margin-bottom: 6px; }
        .stat-value { font-size: 1.35em; font-weight: bold; }
        .chart-container { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .chart-wrapper { position: relative; height: 400px; margin-bottom: 20px; }
        .probability-calculator { background: white; padding: 20px; border-radius: 10px; margin-top: 15px; }
        .calc-title { color: #667eea; font-size: 0.98em; font-weight: 600; margin-bottom: 15px; }
        .calc-options { display: flex; gap: 12px; margin-bottom: 15px; flex-wrap: wrap; }
        .radio-option { display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 0.71em; }
        .radio-option input[type="radio"] { width: 14px; height: 14px; cursor: pointer; }
        .calc-inputs { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 15px; }
        .calc-inputs.single-input { grid-template-columns: 1fr; max-width: 300px; }
        .calc-result { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 8px; border-radius: 8px; text-align: center; font-size: 0.45em; margin-top: 10px; }
        .calc-result-value { font-size: 1.5em; font-weight: bold; margin-top: 4px; }
        .table-container { background: #f8f9fa; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; font-size: 0.75em; }
        th { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 11px; text-align: center; font-weight: 600; }
        th small { font-size: 0.85em; }
        td { padding: 9px; text-align: center; border-bottom: 1px solid #eee; }
        tr:hover { background: #f8f9fa; }
        .error { color: #dc3545; background: #f8d7da; padding: 9px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #f5c6cb; font-size: 0.75em; }
        .hidden { display: none; }
        h2 { color: #667eea; margin-bottom: 15px; font-size: 1.13em; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“Š Binomial Distribution Explorer</h1>
        <div class="input-section">
            <div class="input-group">
                <div class="input-field">
                    <label for="n">Number of Trials (n):</label>
                    <input type="number" id="n" min="1" max="100" value="10" step="1">
                </div>
                <div class="input-field">
                    <label for="p">Probability of Success (p):</label>
                    <input type="number" id="p" min="0" max="1" value="0.5" step="0.01">
                </div>
            </div>
            <div class="slider-container">
                <div class="slider-label">
                    <label for="decimals">Decimal Accuracy:</label>
                    <span class="slider-value" id="decimal-display">4 decimal places</span>
                </div>
                <input type="range" id="decimals" min="2" max="6" value="4" step="1">
            </div>
            <button onclick="calculate()">Calculate Distribution</button>
            <div id="error" class="error hidden"></div>
        </div>
        <div id="results" class="hidden">
            <div class="stats-section">
                <div class="stat-card">
                    <div class="stat-label">Probability of Failure (q)</div>
                    <div class="stat-value" id="q-value">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Mean (Î¼ = np)</div>
                    <div class="stat-value" id="mean-value">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Variance (ÏƒÂ² = npq)</div>
                    <div class="stat-value" id="variance-value">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Std Dev (Ïƒ = âˆšnpq)</div>
                    <div class="stat-value" id="std-value">-</div>
                </div>
            </div>
            <div class="chart-container">
                <h2>Probability Distribution</h2>
                <div class="chart-wrapper">
                    <canvas id="distributionChart"></canvas>
                </div>
                <div class="probability-calculator">
                    <div class="calc-title">ðŸ§® Probability Calculator</div>
                    <div class="calc-options">
                        <label class="radio-option">
                            <input type="radio" name="calc-type" value="less" checked>
                            <span>P(X â‰¤ k) - Less than or equal to</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="calc-type" value="greater">
                            <span>P(X â‰¥ k) - Greater than or equal to</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="calc-type" value="between">
                            <span>P(a â‰¤ X â‰¤ b) - Between two values</span>
                        </label>
                    </div>
                    <div class="calc-inputs single-input" id="calc-inputs-container">
                        <div class="input-field" id="k1-container">
                            <label for="k-value">Value (k):</label>
                            <input type="number" id="k-value" min="0" value="5" step="1">
                        </div>
                        <div class="input-field hidden" id="k2-container">
                            <label for="k2-value">Upper Value (b):</label>
                            <input type="number" id="k2-value" min="0" value="8" step="1">
                        </div>
                    </div>
                    <button onclick="calculateProbability()">Calculate Probability</button>
                    <div id="calc-result" class="calc-result hidden">
                        <div id="calc-result-text"></div>
                        <div class="calc-result-value" id="calc-result-value"></div>
                    </div>
                </div>
            </div>
            <div class="table-container">
                <h2>Probability Table</h2>
                <table>
                    <thead>
                        <tr>
                            <th>k</th>
                            <th>P(X = k)<br><small>Probability Mass Function</small></th>
                            <th>P(X â‰¤ k)<br><small>Cumulative Distribution Function</small></th>
                        </tr>
                    </thead>
                    <tbody id="probability-table"></tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        let chart = null;
        let currentN = 10;
        let currentP = 0.5;
        let probabilities = [];
        let cumulatives = [];

        document.getElementById('decimals').addEventListener('input', function() {
            const decimals = this.value;
            document.getElementById('decimal-display').textContent = decimals + ' decimal places';
            if (!document.getElementById('results').classList.contains('hidden')) {
                updateDisplays();
            }
        });

        document.querySelectorAll('input[name="calc-type"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const k2Container = document.getElementById('k2-container');
                const k1Label = document.querySelector('label[for="k-value"]');
                const inputsContainer = document.getElementById('calc-inputs-container');
                if (this.value === 'between') {
                    k2Container.classList.remove('hidden');
                    k1Label.textContent = 'Lower Value (a):';
                    inputsContainer.classList.remove('single-input');
                } else {
                    k2Container.classList.add('hidden');
                    k1Label.textContent = 'Value (k):';
                    inputsContainer.classList.add('single-input');
                }
            });
        });

        function factorial(n) { if (n === 0 || n === 1) return 1; let r = 1; for (let i = 2; i <= n; i++) r *= i; return r; }
        function binomialCoefficient(n, k) { if (k > n) return 0; if (k === 0 || k === n) return 1; return factorial(n) / (factorial(k) * factorial(n - k)); }
        function binomialPDF(n, k, p) { return binomialCoefficient(n, k) * Math.pow(p, k) * Math.pow(1 - p, n - k); }
        function binomialCDF(n, k, p) { let sum = 0; for (let i = 0; i <= k; i++) sum += binomialPDF(n, i, p); return sum; }
        function getDecimals() { return parseInt(document.getElementById('decimals').value); }
        function formatNumber(num) { return num.toFixed(getDecimals()); }
        function showError(message) { const e = document.getElementById('error'); e.textContent = message; e.classList.remove('hidden'); document.getElementById('results').classList.add('hidden'); }
        function hideError() { document.getElementById('error').classList.add('hidden'); }

        function updateDisplays() {
            const n = currentN, p = currentP, q = 1 - p; const mean = n * p; const variance = n * p * q; const stdDev = Math.sqrt(variance);
            document.getElementById('q-value').textContent = formatNumber(q);
            document.getElementById('mean-value').textContent = formatNumber(mean);
            document.getElementById('variance-value').textContent = formatNumber(variance);
            document.getElementById('std-value').textContent = formatNumber(stdDev);
            const tableBody = document.getElementById('probability-table');
            tableBody.innerHTML = '';
            for (let k = 0; k <= n; k++) {
                const row = tableBody.insertRow();
                row.insertCell(0).textContent = k;
                row.insertCell(1).textContent = formatNumber(probabilities[k]);
                row.insertCell(2).textContent = formatNumber(cumulatives[k]);
            }
        }

        function calculate() {
            hideError();
            const n = parseInt(document.getElementById('n').value);
            const p = parseFloat(document.getElementById('p').value);
            if (isNaN(n) || n < 1 || n > 100) { showError('Please enter a valid number of trials (1-100)'); return; }
            if (isNaN(p) || p < 0 || p > 1) { showError('Please enter a valid probability (0-1)'); return; }
            currentN = n; currentP = p; probabilities = []; cumulatives = []; const labels = [];
            for (let k = 0; k <= n; k++) { labels.push(k); probabilities.push(binomialPDF(n, k, p)); cumulatives.push(binomialCDF(n, k, p)); }
            updateDisplays(); updateChart(labels, probabilities);
            document.getElementById('k-value').max = n; document.getElementById('k2-value').max = n;
            document.getElementById('results').classList.remove('hidden');
        }

        function calculateProbability() {
            const calcType = document.querySelector('input[name="calc-type"]:checked').value;
            const k1 = parseInt(document.getElementById('k-value').value);
            const k2 = parseInt(document.getElementById('k2-value').value);
            const n = currentN, p = currentP;
            if (isNaN(k1) || k1 < 0 || k1 > n) { alert('Please enter a valid k value between 0 and ' + n); return; }
            if (calcType === 'between' && (isNaN(k2) || k2 < 0 || k2 > n || k2 < k1)) { alert('Please enter a valid upper value between ' + k1 + ' and ' + n); return; }
            let result = 0, resultText = '';
            switch(calcType) {
                case 'less': result = binomialCDF(n, k1, p); resultText = `P(X â‰¤ ${k1})`; break;
                case 'greater': result = 1 - binomialCDF(n, k1 - 1, p); resultText = `P(X â‰¥ ${k1})`; break;
                case 'between': result = binomialCDF(n, k2, p) - binomialCDF(n, k1 - 1, p); resultText = `P(${k1} â‰¤ X â‰¤ ${k2})`; break;
            }
            document.getElementById('calc-result-text').textContent = resultText;
            document.getElementById('calc-result-value').textContent = formatNumber(result);
            document.getElementById('calc-result').classList.remove('hidden');
        }

        function updateChart(labels, data) {
            const ctx = document.getElementById('distributionChart').getContext('2d');
            if (chart) { chart.destroy(); }
            chart = new Chart(ctx, {
                type: 'bar',
                data: { labels, datasets: [{ label: 'P(X = k)', data, backgroundColor: 'rgba(102, 126, 234, 0.7)', borderColor: 'rgba(102, 126, 234, 1)', borderWidth: 2 }] },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: true, position: 'top' }, title: { display: true, text: 'Binomial Probability Distribution', font: { size: 16 } } },
                    scales: { y: { beginAtZero: true, title: { display: true, text: 'Probability' } }, x: { title: { display: true, text: 'Number of Successes (k)' } } }
                }
            });
        }

        document.getElementById('n').addEventListener('keypress', e => { if (e.key === 'Enter') calculate(); });
        document.getElementById('p').addEventListener('keypress', e => { if (e.key === 'Enter') calculate(); });
        document.getElementById('k-value').addEventListener('keypress', e => { if (e.key === 'Enter') calculateProbability(); });
        document.getElementById('k2-value').addEventListener('keypress', e => { if (e.key === 'Enter') calculateProbability(); });

        calculate();
    </script>
</body>
</html>